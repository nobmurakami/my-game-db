<%= render "shared/header" %>

<div class="ui main container">
  <h1 class="ui header">Search</h1>

  <%= search_form_for @q, class: "ui form" do |f| %>
    <div class="three fields">
      <div class="field">
        <%= f.label :title_or_description, 'Title or Description' %>
        <div class="ui input">
          <%= f.search_field :title_or_description_cont, placeholder: "Search..." %>
          <%= button_tag type: "submit", class: "ui icon button" do %>
            <i class="search icon"></i>
          <% end %> 
        </div>
      </div>
      <div class="field">
        <%= f.label :metascore_gteq, 'Minimum Metascore' %>
        <%= f.text_field :metascore_gteq, placeholder:"1" %>
      </div>
      <div class="field">
        <%= f.label :metascore_lteq, 'Maximum Metascore' %>
        <%= f.text_field :metascore_lteq, placeholder:"100" %>
      </div>
    </div>
  <% end %>

  <div class="ui menu">
    <div class="borderless header item">
      Sorting
    </div>
    <div class="right menu">
      <div class="ui item">
        <%= sort_link(@q, :title, "Title") %>
      </div>
      <div class="item">
        <%= sort_link(@q, :metascore, "Metascore") %>
      </div>
    </div>
  </div>

  <div>
    <%= link_to 'All Reset', request.path %>
  </div>

  <div class="ui items">
    <% @games.each do |game| %>
      <div class="item">
        <div class="image">
          <% if game.image.attached? %>
            <%= image_tag game.image %>
          <% else %>
            <%= image_tag 'noimage.png' %>
          <% end %>
        </div>
        <div class="content">
          <%= link_to game.title, game_path(game), class: "header" %>
          <div class="meta">
            <span><%= "Metascore: #{game.metascore}" %></span>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <%= paginate @games %>
</div>